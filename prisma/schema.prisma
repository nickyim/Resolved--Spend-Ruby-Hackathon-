generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int       @id @default(autoincrement()) // Primary key
  clerkId   String    @unique                      // Clerk's user ID, unique but not primary
  email     String    @unique                      // Email should also be unique
  entries   Entry[]   // One-to-many relationship with entries
  files     File[]    // One-to-many relationship with files
}

model Entry {  
  id                        Int       @id @default(autoincrement()) // Primary key
  entryId                   String    @unique                       // Unique identifier, but not primary
  isComplaint               Boolean   
  product                   String?
  subProduct                String?
  issue                     String?
  subIssue                  String?
  entryText                 String    @db.Text  
  summary                   String?   
  dateSentToCompany         DateTime?
  dateReceived              DateTime?
  company                   String?
  companyResponse           String?
  companyPublicResponse     String?
  consumerDisputed          String?
  consumerConsentProvided   String?
  state                     String?
  zipCode                   String?
  submittedVia              String?
  tags                      String?
  timely                    Boolean?
  productCategory           String?   
  subProductCategory        String?   
  files                     File[]    // Relation to associated files
  vectorId                  String?   
  userId                    Int       // Foreign key to the User model
  user                      User      @relation(fields: [userId], references: [id])
}

model File {
  id          Int       @id @default(autoincrement()) // Primary key
  url         String    
  type        FileType  
  entry       Entry     @relation(fields: [entryId], references: [id])
  entryId     Int
  userId      Int       // Foreign key to the User model
  user        User      @relation(fields: [userId], references: [id])
}

enum FileType {
  TEXT
  IMAGE
  VIDEO
  AUDIO
  JSON
}
